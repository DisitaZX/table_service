{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h1><i class="fas fa-table me-2"></i>Доступные таблицы</h1>

    <div class="list-group mt-3">
        {% for item in tables %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-1">
                    <a href="{% if item.can_edit %}{% url 'table_detail' pk=item.table.pk %}{% else %}{{ item.table.get_shared_url }}{% endif %}">
                        {{ item.table.title }}
                    </a>
                </h5>
                <small class="text-muted">
                    Shared by: {{ item.shared_by }}
                    {% if item.can_edit %}(Can edit){% else %}(View only){% endif %}
                </small>
            </div>
            <div>
                {% if not item.is_owner %}
                <a href="{{ item.table.get_shared_url }}" class="btn btn-sm btn-outline-secondary">
                    Открыть Shared View
                </a>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="list-group-item">
            No shared tables available
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
